<section
  class="w-full h-screen flex flex-col justify-center items-center p-4 fixed bg-violet-900 bg-[url('https://images.unsplash.com/photo-1519494026892-80bbd2d6fd0d?q=80&w=2053&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D')] bg-cover bg-center bg-no-repeat"
>
  <div class="w-full max-w-[446px] h-fit z-10">
    <div
      class="w-full p-6 sm:p-8 rounded-2xl shadow-2xl border border-white/30 bg-white/60 backdrop-blur-xl"
    >
      <div class="flex flex-col mb-3">
        <h2 class="text-xl font-bold text-center">Sacar turno</h2>
        <p class="text-sm text-center text-gray-500 mt-1">
          Ingresá tu DNI para solicitar un turno
        </p>
      </div>
      <div class="flex flex-col">
        <form [formGroup]="myForm" (ngSubmit)="onSubmit()">
          <div class="flex flex-col my-2 sm:my-4">
            <label
              for="DNI"
              class="fieldset-legend text-sm font-medium flex items-center mb-1.5"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="h-4 w-4 mr-1.5 text-black"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M12 2a10 10 0 100 20 10 10 0 000-20zm0 18a8 8 0 110-16 8 8 0 010 16zm-1-13h2v6h-2zm0 8h2v2h-2z"
                />
              </svg>
              DNI del paciente
            </label>
            <input
              type="text"
              #txt
              [value]="dni()"
              (input)="dni.set(txt.value)"
              class="input w-full"
            />
            @if (loading()) {
            <span class="loading loading-spinner text-primary mt-2"></span>
            }
            <!-- --- -->
            @else {
            <!-- ----- -->
            @if ( dataPatient()?.id !== null ) {
            <div class="flex flex-col my-2 sm:my-4">
              <label
                for="fullName"
                class="fieldset-legend text-sm font-medium flex items-center mb-1 5"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  class="h-4 w-4 mr-1.5 text-black"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"
                  />
                </svg>
                Paciente
              </label>
              <input
                readonly
                type="text"
                [value]="dataPatient()?.name + ' ' + dataPatient()?.last_name"
                class="input w-full"
              />
            </div>
            }
            <!-- ----- -->
            @if ( dni() !== '' && dataPatient()?.id === null ) {
            <p class="text-red-500 mt-2">
              No existe usuario con el DNI {{ dni() }}
            </p>
            } }
          </div>

          <div class="flex flex-col my-2 sm:my-4">
            <label for="specialty" class="mb-2 text-sm font-medium">
              Especialidad
            </label>
            <select
              name="specialty"
              formControlName="specialty"
              id="specialty"
              class="select w-full"
              aria-placeholder="Especialidad"
            >
              <option value="" class="option">
                Seleccioná una especialidad
              </option>
              @for (specialty of serviceAppoinment.specialties() ?? []; track
              $index) {
              <option value="{{ specialty }}" class="option">
                {{ specialty }}
              </option>
              }
            </select>
          </div>

          <div class="mt-2 sm:mt-4 mb-3">
            <button
              type="submit"
              class="btn btn-neutral w-full"
              [disabled]="
                myForm.invalid || loading() || dataPatient()?.id === null
              "
            >
              Solicitar turno
            </button>
          </div>
        </form>
      </div>
      <div class="mt-2">
        <span class="text-sm text-neutral text-center block">
          ¿No estás registrado todavia ?
          <span class="underline hover:text-primary">
            Acercate a recepción.
          </span>
        </span>
      </div>
    </div>
  </div>
  <toast-component [toast]="toastStatusCode()" />
</section>
